class BusinessCalculator{constructor(t){this.options={root:null},this.revPercentage=10,this.multiplier=1,null!=t.root?this.options=t:console.error("[BusinessCalculator] No root element has been defined!")}setRootClasses(t){t.classList.add("container"),t.classList.add("mt-5"),t.classList.add("business-calculator")}setCurrency(){return this.currency=void 0!==this.options.currency?this.options.currency:"$",this.currencyOrient=void 0!==this.options.currencyOrientation?this.options.currencyOrientation:BC_Currency_Orientation.BEFORE_TEXT,this.currencyOrient===BC_Currency_Orientation.BEFORE_TEXT?(this.insertCSS(".bc__output__revenue .bc__output__revenue__total::before { content: '"+this.currency+"'; font-size: 30px; font-weight: 700; position: relative; }"),!0):this.currencyOrient===BC_Currency_Orientation.AFTER_TEXT?(this.insertCSS(".bc__output__revenue .bc__output__revenue__total::after { content: '"+this.currency+"'; font-size: 30px; font-weight: 700; position: relative; }"),!0):(console.error("[BusinessCalculator] Invalid currency orientation provided!"),!1)}init(){let t=this.options.root;if(null==t)return;if(this.setRootClasses(t),this.createGlobalCSS(),this.insertColors(),!this.setCurrency())return;void 0!==this.options.output?.breakdown?.listIcon?this.insertCSS(".bc__output__breakdown::before{ content: '\\"+this.options.output.breakdown.listIcon+"'; font-family: 'Font Awesome 6 Pro'; font-weight: 300; position: absolute; left: 0px; top: 4px; color: var(--bc-accent); }"):this.insertCSS(".bc__output__breakdown::before{ content: '\\f058'; font-family: 'Font Awesome 6 Pro'; font-weight: 300; position: absolute; left: 0px; top: 4px; color: var(--bc-accent); }");let e=document.createElement("h2");e.innerText=void 0!==this.options.heading?this.options.heading:"Calculate your Budget",t.appendChild(e);let i=document.createElement("div");i.classList.add("row","m-0","justify-content-between","align-items-start"),t.appendChild(i),this.generateInput(i)&&this.generateOutput(i)&&this.progressScript()}generateOutput(t){let e=this.createDiv(t,"col-lg-4","col-12","bc__output","text-center"),i=this.createDiv(e,"bc__output__heading");i.innerText=void 0!==this.options.output?.heading?.text?this.options.output?.heading?.text:"Your Recommended";this.createSpan(i,void 0!==this.options.output?.heading?.colored?this.options.output?.heading?.colored:"Marketing Spend","colored");let o=this.createDiv(e,"bc__output__revenue"),n=this.createSpan(o,"","bc__output__revenue__percentage");this.bc__output__revenue__percentage_span=this.createSpan(n,""),n.innerHTML+=void 0!==this.options.output?.revenuePercentageLabel?this.options.output?.revenuePercentageLabel:"% of Revenue",this.bc__output__revenue__total=this.createSpan(o,"","bc__output__revenue__total");let r=this.createSpan(o,void 0!==this.options.output?.perMonthLabel?this.options.output?.perMonthLabel:"per month"),s={icon:null!=this.options.output?.perMonthTooltip?.icon?this.options.output?.perMonthTooltip?.icon:"fa-light fa-circle-info",text:null!=this.options.output?.perMonthTooltip?.text?this.options.output?.perMonthTooltip?.text:"This marketing budget could be allocated to salaries, specialist agency support and marketing initiatives, campaigns, ad spends and related expenses.",ariaLabel:null!=this.options.output?.perMonthTooltip?.ariaLabel?this.options.output?.perMonthTooltip?.ariaLabel:"Open this tooltip to learn more about the Monthly Budget"},a=this.createToolTip(s);if(r.appendChild(a),void 0!==this.options.output?.breakdown){let i=this.createDiv(e,"bc__output__breakdowns"),o=document.createElement("details");o.addEventListener("toggle",(function(){e.classList.toggle("bc__details__open")}));let n=document.createElement("summary");n.innerText=void 0!==this.options.output?.breakdown?.heading?this.options.output?.breakdown?.heading:"Example Breakdown";let r=document.createElement("i"),s=void 0!==this.options.output?.breakdown?.openIcon?[...this.options.output.breakdown.openIcon.split(" ")]:[..."fa-regular fa-chevron-down".split(" ")];r.classList.add(...s),n.appendChild(r),o.appendChild(n),i.appendChild(o);let a=document.createElement("ul");o.appendChild(a);let l=this.options.output?.breakdown?.breakdowns;if(void 0===l)return t.remove(),console.error("[BusinessCalculator] No breakdowns were defined!"),!1;l.forEach((t=>{let e=document.createElement("li");e.classList.add("bc__output__breakdown"),e.setAttribute("data-percentage",t.percentage.toString());this.createSpan(e,t.text,"bc__output__breakdown__name");let i=this.createSpan(e,"("+t.percentage.toString()+"%) ","bc__output__breakdown__subtotal");this.createSpan(i,"");a.appendChild(e)}));this.createSpan(o,void 0!==this.options.output?.breakdown?.hint?this.options.output?.breakdown?.hint:"Adapt your budget based on campaign results and business goals, experimenting with tailored strategies and channels.","bc__hint")}let l=document.createElement("a");return l.href=void 0!==this.options.output?.button?this.options.output?.button.href:"#",l.innerText=void 0!==this.options.output?.button?this.options.output?.button.text:"See plans",l.classList.add("bc__button"),e.appendChild(l),this.createDiv(e,"bc__hint","reduced").innerHTML=void 0!==this.options.output?.endHint?this.options.output?.endHint:"Unsure where to allocate your marketing spend? <a href='#'>Take the quiz</a>",!0}createDiv(t,...e){let i=document.createElement("div");return 0!==e.length&&i.classList.add(...e),null!=t&&t.appendChild(i),i}createSpan(t,e,...i){let o=document.createElement("span");return 0!==i.length&&o.classList.add(...i),o.innerHTML=e,null!=t&&t.appendChild(o),o}createSlider(t,e,i,o){let n=this.createDiv(t,"bc__slider"),r=this.createDiv(n,"bc__slider__upper"),s={icon:null!=e?.icon?e?.icon:"fa-light fa-circle-info",text:null!=e?.text?e?.text:"Your business' average gross monthly revenue - total brought in before any expenses.",ariaLabel:null!=e?.ariaLabel?e?.ariaLabel:"Open this tooltip to learn more about the Monthly Revenue"},a=void 0!==i?i:"Monthly Revenue",l=this.createSubHeading(s,a);r.appendChild(l),this.bc__slider__revenue=this.createSpan(r,"","bc__slider__revenue","subHeading");let u=this.createDiv(n,"bc__slider__middle"),c=void 0!==o?.min?o?.min.toString():"0",p=void 0!==o?.max?o?.max.toString():"1000000",h=void 0!==o?.step?o?.step.toString():"5000";this.bc__slider__input=document.createElement("input"),this.bc__slider__input.type="range",this.bc__slider__input.id="revenue",this.bc__slider__input.name="revenue",this.bc__slider__input.min=c,this.bc__slider__input.max=p,this.bc__slider__input.step=h,this.bc__slider__input.oninput=()=>{this.progressScript(this)},this.bc__slider__input.value=((parseInt(p)+parseInt(c))/2).toString(),u.appendChild(this.bc__slider__input);let d=this.createDiv(n,"bc__slider__lower");this.createSpan(d,this.currencyOrient===BC_Currency_Orientation.BEFORE_TEXT?this.currency+BusinessCalculator.formatMoney(c):BusinessCalculator.formatMoney(c)+this.currency),this.createSpan(d,this.currencyOrient===BC_Currency_Orientation.BEFORE_TEXT?this.currency+BusinessCalculator.formatMoney(p):BusinessCalculator.formatMoney(p)+this.currency)}generateInput(t){let e=this.createDiv(t,"col-lg-7","col-12","bc__input");this.createSlider(e,this.options.input?.monthlyRevenue?.tooltip,this.options.input?.monthlyRevenue?.heading,this.options.input?.monthlyRevenue?.slider);let i=this.createDiv(e,"bc__industry__selector"),o=void 0!==this.options.input?.industry?.heading?this.options.input?.industry?.heading:"Industry",n={icon:null!=this.options.input?.industry?.tooltip?.icon?this.options.input?.industry?.tooltip?.icon:"fa-light fa-circle-info",text:null!=this.options.input?.industry?.tooltip?.text?this.options.input?.industry?.tooltip?.text:"Select your business industry or closest match.",ariaLabel:null!=this.options.input?.industry?.tooltip?.ariaLabel?this.options.input?.industry?.tooltip?.ariaLabel:"Open this tooltip to learn more about the Industries"},r=this.createSubHeading(n,o);i.appendChild(r);let s=this.createDiv(i,"bc__industry__types"),a=this.options.input?.industry?.industries;if(void 0===a)return t.remove(),console.error("[BusinessCalculator] No industries specified!"),!1;{let t=0;a.forEach((e=>{let i=this.createSpan(s,e.text,"bc__industry__type");0==t++&&(i.classList.add("active"),this.revPercentage=parseInt(e.percentage.toString())),i.setAttribute("data-percentage",e.percentage.toString()),i.addEventListener("click",(()=>{document.querySelectorAll("span.bc__industry__type").forEach((t=>t.classList.remove("active"))),i.classList.add("active"),this.revPercentage=parseInt(i.getAttribute("data-percentage")),this.updateTotal()}))}))}let l=this.createDiv(e,"bc__growth__goal"),u=void 0!==this.options.input?.growth?.heading?this.options.input?.growth?.heading:"Growth Goal",c={icon:null!=this.options.input?.growth?.tooltip?.icon?this.options.input?.growth?.tooltip?.icon:"fa-light fa-circle-info",text:null!=this.options.input?.growth?.tooltip?.text?this.options.input?.growth?.tooltip?.text:"Conservative: a more cautious approach, aiming for steady and sustainable growth. <br>Moderate: balanced growth, combining stability with some expansion. <br>Aggressive: rapid growth and expansion, even if it involves higher risk.",ariaLabel:null!=this.options.input?.growth?.tooltip?.ariaLabel?this.options.input?.growth?.tooltip?.ariaLabel:"Open this tooltip to learn more about the Growth Goals"},p=this.createSubHeading(c,u);l.appendChild(p);let h=this.createDiv(l,"bc__growth__goal__buttons"),d=this.options.input?.growth?.buttons;if(void 0===d)return t.remove(),console.error("[BusinessCalculator] No growth buttons specified!"),!1;{let t=0;d.forEach((e=>{let i=this.createSpan(h,e.text,"bc__growth__goal__button");0==t++&&(i.classList.add("active"),this.multiplier=parseFloat(e.multiplier.toString())),i.setAttribute("data-multiplier",e.multiplier.toString()),i.addEventListener("click",(()=>{document.querySelectorAll("span.bc__growth__goal__button").forEach((t=>t.classList.remove("active"))),i.classList.add("active"),this.multiplier=parseFloat(i.getAttribute("data-multiplier")),this.updateTotal()}))}))}return!0}progressScript(t){const e=parseInt(this.bc__slider__input.value);let i=(e-parseInt(this.bc__slider__input.min))/(parseInt(this.bc__slider__input.max)-parseInt(this.bc__slider__input.min))*100;this.bc__slider__input.style.background=`linear-gradient(to right, var(--bc-primary) ${i}%, var(--bc-foreground-alternative) ${i}%)`,this.bc__slider__revenue.innerText=BusinessCalculator.formatMoney(e),this.updateTotal()}createSubHeading(t,e){let i=this.createSpan(null,e,"subheading"),o=this.createToolTip(t);return i.appendChild(o),i}updateTotal(){let t=this.revPercentage*this.multiplier/100;this.bc__output__revenue__total.innerHTML=BusinessCalculator.formatMoney(parseInt(this.bc__slider__input.value)*t),document.querySelector(".bc__output__revenue__percentage>span").innerHTML=(Math.round(1e3*t)/10).toString(),document.querySelectorAll("li.bc__output__breakdown").forEach((e=>{let i=e.getAttribute("data-percentage"),o=parseInt(this.bc__slider__input.value)*t*(parseFloat(i)/100);e.querySelector(".bc__output__breakdown__subtotal>span").innerHTML=this.currencyOrient===BC_Currency_Orientation.BEFORE_TEXT?this.currency+BusinessCalculator.formatMoney(o):BusinessCalculator.formatMoney(o)+this.currency}))}static formatMoney(t){return Math.floor(parseFloat(t)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}createToolTip(t){let e=this.createDiv(null,"bc__tooltip");e.ariaLabel=t.ariaLabel;let i=this.createDiv(e,"icon"),o=document.createElement("i");o.classList.add(...t.icon.split(" ")),i.appendChild(o);let n=this.createDiv(o,"content");return this.createDiv(n,"inner").innerHTML=t.text,e}createGlobalCSS(){this.globalCSS=document.createElement("style"),document.head.appendChild(this.globalCSS)}insertColors(){this.insertCSS(":root { --bc-background: "+(this.options.colors?.background?this.options.colors?.background:"#060E15")+"; --bc-foreground: "+(this.options.colors?.foreground?this.options.colors?.foreground:"#E9EEEB")+"; --bc-foreground-alternative: "+(this.options.colors?.foregroundAlternative?this.options.colors?.foregroundAlternative:"#818181")+"; --bc-primary: "+(this.options.colors?.primary?this.options.colors?.primary:"#0C92A8")+"; --bc-secondary: "+(this.options.colors?.secondary?this.options.colors?.secondary:"#327773")+"; --bc-accent: "+(this.options.colors?.third?this.options.colors?.third:"#6EBDC1")+";}")}insertCSS(t){this.globalCSS.sheet?.insertRule(t)}}var BC_Currency_Orientation;!function(t){t.BEFORE_TEXT="BEFORE_TEXT",t.AFTER_TEXT="AFTER_TEXT"}(BC_Currency_Orientation||(BC_Currency_Orientation={}));
